jobs.html:
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Job Listings</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
  <div class="container my-5">
    <h2 class="mb-4">Current Openings</h2>
    <!-- Jobs will be injected here -->
  </div>

  <script>
  fetch("http://localhost:2000/api/jobs")
    .then(res => res.json())
    .then(jobs => {
      const container = document.querySelector(".container");

      jobs.forEach(job => {
        const card = document.createElement("div");
        card.className = "card p-3 mb-3";
        card.innerHTML = `
          <h4>${job.title}</h4>
          <p class="text-muted">Location: ${job.location}</p>
          <p class="text-muted">Company: ${job.company}</p>

          <a href="job-detail.html?id=${job.id}" class="btn btn-primary">View Details</a>
        `;
        container.appendChild(card);
      });
    })
    .catch(err => console.error("Error fetching jobs:", err));
</script>

</body>
</html>

jobs-detail:
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Job Details</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
  <div class="container my-5">
    <div id="job-detail" class="card p-4 shadow-sm">
      <p>Loading job details...</p>
    </div>

    <!-- Apply Section Hidden Initially -->
    <div id="apply-section" style="display:none; margin-top:20px;">
      <h4>Apply for this job</h4>
      <form id="applyForm">
        <div class="mb-3">
          <label for="name" class="form-label">Full Name</label>
          <input type="text" class="form-control" id="name" />
        </div>
        <div class="mb-3">
          <label for="email" class="form-label">Email</label>
          <input type="email" class="form-control" id="email" />
        </div>
        <div class="mb-3">
          <label for="resume" class="form-label">Resume URL</label>
          <input type="text" class="form-control" id="resume" />
        </div>
        <button type="submit" class="btn btn-success">Submit Application</button>
      </form>
    </div>

    <a href="jobs.html" class="btn btn-secondary mt-3">Back to Jobs</a>
  </div>

  <script>
    // 1️⃣ Get job ID from URL
    const urlParams = new URLSearchParams(window.location.search);
    const jobId = parseInt(urlParams.get("id"));

    const jobContainer = document.getElementById("job-detail");
    const applySection = document.getElementById("apply-section");

    // 2️⃣ Fetch job details from backend
    fetch(`http://localhost:2000/api/jobs/${jobId}`)
      .then(res => res.json())
      .then(job => {
        if (job && job.id) {
          jobContainer.innerHTML = `
            <h2>${job.title}</h2>
            <p class="text-muted">Company: ${job.company}</p>
            <p class="text-muted">Location: ${job.location}</p>
            <p>${job.description}</p>
            <button id="applyBtn" class="btn btn-success">Apply Now</button>
          `;

          // 3️⃣ Show apply form on button click
          const applyBtn = document.getElementById("applyBtn");
          applyBtn.addEventListener("click", () => {
            applySection.style.display = "block"; // show form
            applyBtn.style.display = "none";       // hide Apply button
          });
        } else {
          jobContainer.innerHTML = `<p class="text-danger">Job not found.</p>`;
        }
      })
      .catch(err => {
        jobContainer.innerHTML = `<p class="text-danger">Error loading job details.</p>`;
        console.error(err);
      });

    // 4️⃣ Handle form submission
    document.getElementById("applyForm").addEventListener("submit", function(e) {
      e.preventDefault(); // stop default submit

      const name = document.getElementById("name").value.trim();
      const email = document.getElementById("email").value.trim();
      const resume = document.getElementById("resume").value.trim();

      // Basic validation
      if (!name || !email || !resume) {
        alert("All fields are required!");
        return;
      }
      if (!email.includes("@")) {
        alert("Enter a valid email address!");
        return;
      }

      // 5️⃣ Send data to backend
      fetch("http://localhost:2000/api/apply", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ name, email, resume })
      })
      .then(res => res.json())
      .then(data => {
        // ✅ Show proper backend message
        alert(data.message || "Application submitted successfully!");
        // Reset form
        document.getElementById("applyForm").reset();
        applySection.style.display = "none";

        // Show Apply button again
        const applyBtn = document.getElementById("applyBtn");
        if (applyBtn) applyBtn.style.display = "block";
      })
      .catch(err => {
        console.error(err);
        alert("Error submitting application. Try again later.");
      });
    });
  </script>
</body>
</html>

server.js:
const express = require("express");
const cors = require("cors");
const mysql = require("mysql2"); // Add mysql2
const app = express();
const PORT = 2000;

app.use(cors());
app.use(express.json());
const path = require("path");

// Serve static files from 'public' folder
app.use(express.static(path.join(__dirname, "public")));


// Connect to MySQL
const db = mysql.createConnection({
  host: "localhost",
  user: "root",       // your MySQL username
  password: "Sathish@3804",       // your MySQL password
  database: "career_site"
});

db.connect(err => {
  if (err) console.log(err);
  else console.log("✅ MySQL Connected!");
});

// Routes
app.get("/api/jobs", (req, res) => {
  db.query("SELECT * FROM jobs", (err, results) => {
    if (err) return res.status(500).send(err);
    res.json(results);
  });
});

app.get("/api/jobs/:id", (req, res) => {
  const jobId = parseInt(req.params.id);
  db.query("SELECT * FROM jobs WHERE id = ?", [jobId], (err, results) => {
    if (err) return res.status(500).send(err);
    if (results.length === 0) res.status(404).json({ error: "Job not found" });
    else res.json(results[0]);
  });
});
// Simple sanitizer to prevent XSS
function sanitize(str) {
  if (!str) return "";
  return str.replace(/&/g, "&amp;")
            .replace(/</g, "&lt;")
            .replace(/>/g, "&gt;")
            .replace(/"/g, "&quot;")
            .replace(/'/g, "&#039;");
}

// Route to handle job applications
app.post("/api/apply", (req, res) => {
  const name = sanitize(req.body.name);
  const email = sanitize(req.body.email);
  const resume = sanitize(req.body.resume);

  const query = "INSERT INTO applications (name, email, resume) VALUES (?, ?, ?)";
  db.execute(query, [name, email, resume], (err, result) => {
    if (err) return res.status(500).json({ error: "Database error" });
    res.json({ message: "Application submitted successfully!" });
  });
});


app.listen(PORT, () => {
  console.log(`✅ Server running at http://localhost:${PORT}`);
});

so i connected mysql db and after submit i can see he saved in table of application and doing a validation by santizing to avoid vulnerability so as of now which phase is over? and note it down 